# Tools å·¥å…·åŒ…

å·¥å…·åŒ…æä¾›äº†é¡¹ç›®ä¸­ä½¿ç”¨çš„é€šç”¨æ•°æ®ç»“æ„å’Œç®—æ³•å®ç°ï¼ŒåŒ…æ‹¬åŒå‘å¾ªç¯é“¾è¡¨å’ŒLRUç¼“å­˜ç®—æ³•ã€‚è¿™äº›å·¥å…·ç±»ä¸ºä¸Šå±‚ä¸šåŠ¡é€»è¾‘æä¾›é«˜æ•ˆçš„æ•°æ®ç»“æ„æ”¯æŒã€‚

## ğŸ“ åŒ…ç»“æ„

```
tools/
â”œâ”€â”€ linked_list.go      # åŒå‘å¾ªç¯é“¾è¡¨å®ç°
â”œâ”€â”€ linked_list_test.go # åŒå‘å¾ªç¯é“¾è¡¨æµ‹è¯•
â”œâ”€â”€ lru.go             # LRUç®—æ³•å®ç°
â””â”€â”€ lru_test.go        # LRUç®—æ³•æµ‹è¯•
```

## ğŸš€ ä¸»è¦åŠŸèƒ½

### åŒå‘å¾ªç¯é“¾è¡¨ (LinkedList)

- **æ³›å‹æ”¯æŒ**: æ”¯æŒå­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®
- **åŒå‘éå†**: æ”¯æŒå‰å‘å’Œåå‘éå†
- **å¾ªç¯ç»“æ„**: ç®€åŒ–è¾¹ç•Œæ¡ä»¶å¤„ç†
- **é«˜æ•ˆæ“ä½œ**: O(1)æ—¶é—´å¤æ‚åº¦çš„æ’å…¥å’Œåˆ é™¤

### LRUç¼“å­˜ç®—æ³• (LRU)

- **æœ€è¿‘æœ€å°‘ä½¿ç”¨**: å®ç°LRUæ·˜æ±°ç­–ç•¥
- **æ³›å‹æ”¯æŒ**: æ”¯æŒä»»æ„ç±»å‹çš„é”®å€¼å¯¹
- **é«˜æ•ˆè®¿é—®**: O(1)æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾å’Œæ›´æ–°
- **å®¹é‡æ§åˆ¶**: æ”¯æŒå›ºå®šå®¹é‡é™åˆ¶

## ğŸ”§ å®‰è£…ä½¿ç”¨

```go
import "github.com/justinwongcn/hamster/internal/domain/tools"
```

## ğŸ“– å¿«é€Ÿä¸Šæ‰‹

### åŒå‘å¾ªç¯é“¾è¡¨ä½¿ç”¨

```go
// åˆ›å»ºé“¾è¡¨
list := tools.NewLinkedList[int]()

// æ·»åŠ å…ƒç´ 
list.Append(1, 2, 3)
list.Add(1, 4) // åœ¨ç´¢å¼•1æ’å…¥4

// è·å–å…ƒç´ 
val, err := list.Get(2)
if err != nil {
    log.Printf("è·å–å¤±è´¥: %v", err)
}

// åˆ é™¤å…ƒç´ 
err = list.Delete(0)
if err != nil {
    log.Printf("åˆ é™¤å¤±è´¥: %v", err)
}

// éå†é“¾è¡¨
list.Range(func(index int, val int) error {
    fmt.Printf("ç´¢å¼•%d: å€¼%d\n", index, val)
    return nil
})
```

### LRUç¼“å­˜ä½¿ç”¨

```go
// åˆ›å»ºLRUç¼“å­˜
lru := tools.NewLRU[string](100) // å®¹é‡100

// æ·»åŠ å…ƒç´ 
lru.Put("key1", "value1")
lru.Put("key2", "value2")

// è·å–å…ƒç´ 
value, ok := lru.Get("key1")
if ok {
    fmt.Printf("è·å–åˆ°å€¼: %s\n", value)
}

// æ£€æŸ¥æ˜¯å¦å­˜åœ¨
if lru.Exist("key2") {
    fmt.Println("key2å­˜åœ¨")
}

// åˆ é™¤å…ƒç´ 
lru.Delete("key1")
```

## ğŸ¯ è®¾è®¡ç‰¹ç‚¹

### 1. æ³›å‹è®¾è®¡

- ä½¿ç”¨Go 1.18+çš„æ³›å‹ç‰¹æ€§
- ç±»å‹å®‰å…¨ï¼Œé¿å…ç±»å‹æ–­è¨€
- æ”¯æŒä»»æ„ç±»å‹çš„æ•°æ®å­˜å‚¨

### 2. é«˜æ€§èƒ½

- åŒå‘é“¾è¡¨æä¾›O(1)æ’å…¥åˆ é™¤
- LRUç®—æ³•æä¾›O(1)è®¿é—®æ›´æ–°
- å†…å­˜å‹å¥½çš„æ•°æ®ç»“æ„è®¾è®¡

### 3. æ˜“ç”¨æ€§

- ç®€æ´çš„APIè®¾è®¡
- ä¸°å¯Œçš„æ“ä½œæ–¹æ³•
- å®Œå–„çš„é”™è¯¯å¤„ç†

### 4. å¯é æ€§

- å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
- è¾¹ç•Œæ¡ä»¶å¤„ç†
- çº¿ç¨‹å®‰å…¨è€ƒè™‘

## âš ï¸ æ³¨æ„äº‹é¡¹

### åŒå‘å¾ªç¯é“¾è¡¨

1. **ç´¢å¼•èŒƒå›´**: ç´¢å¼•ä»0å¼€å§‹ï¼Œæ³¨æ„è¾¹ç•Œæ£€æŸ¥
2. **å†…å­˜ç®¡ç†**: åˆ é™¤å…ƒç´ æ—¶ä¼šè‡ªåŠ¨æ¸…ç†å†…å­˜
3. **å¹¶å‘å®‰å…¨**: éçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦å¤–éƒ¨åŒæ­¥
4. **æ€§èƒ½è€ƒè™‘**: éšæœºè®¿é—®ä¸ºO(n)ï¼Œé¡ºåºè®¿é—®ä¸ºO(1)

### LRUç¼“å­˜

1. **å®¹é‡é™åˆ¶**: è¶…è¿‡å®¹é‡æ—¶ä¼šè‡ªåŠ¨æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´ 
2. **è®¿é—®æ›´æ–°**: Getæ“ä½œä¼šæ›´æ–°å…ƒç´ çš„ä½¿ç”¨æ—¶é—´
3. **å¹¶å‘å®‰å…¨**: éçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦å¤–éƒ¨åŒæ­¥
4. **å†…å­˜å ç”¨**: éœ€è¦é¢å¤–çš„é“¾è¡¨ç»“æ„ç»´æŠ¤è®¿é—®é¡ºåº

## ğŸ”„ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„æ•°æ®ç»“æ„

```go
// 1. å®šä¹‰æ¥å£
type Stack[T any] interface {
    Push(item T)
    Pop() (T, error)
    Peek() (T, error)
    IsEmpty() bool
    Size() int
}

// 2. å®ç°ç»“æ„ä½“
type ArrayStack[T any] struct {
    items []T
}

// 3. å®ç°æ–¹æ³•
func (s *ArrayStack[T]) Push(item T) {
    s.items = append(s.items, item)
}

func (s *ArrayStack[T]) Pop() (T, error) {
    if len(s.items) == 0 {
        var zero T
        return zero, errors.New("æ ˆä¸ºç©º")
    }
    
    item := s.items[len(s.items)-1]
    s.items = s.items[:len(s.items)-1]
    return item, nil
}
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

```go
// 1. é¢„åˆ†é…å®¹é‡
list := NewLinkedList[int]()
// å¦‚æœçŸ¥é“å¤§æ¦‚å¤§å°ï¼Œå¯ä»¥è€ƒè™‘é¢„åˆ†é…

// 2. æ‰¹é‡æ“ä½œ
items := []int{1, 2, 3, 4, 5}
list.Append(items...) // æ¯”é€ä¸ªæ·»åŠ æ›´é«˜æ•ˆ

// 3. é¿å…é¢‘ç¹çš„éšæœºè®¿é—®
// âŒ é¿å…
for i := 0; i < list.Len(); i++ {
    val, _ := list.Get(i) // O(nÂ²)å¤æ‚åº¦
}

// âœ… æ¨è
list.Range(func(index int, val int) error {
    // å¤„ç†å…ƒç´ 
    return nil
}) // O(n)å¤æ‚åº¦
```

## ğŸ“Š æ€§èƒ½åŸºå‡†

### åŒå‘å¾ªç¯é“¾è¡¨æ€§èƒ½

- **æ’å…¥æ“ä½œ**: O(1) - å¤´éƒ¨/å°¾éƒ¨æ’å…¥
- **åˆ é™¤æ“ä½œ**: O(1) - å·²çŸ¥èŠ‚ç‚¹åˆ é™¤
- **æŸ¥æ‰¾æ“ä½œ**: O(n) - æŒ‰ç´¢å¼•æŸ¥æ‰¾
- **éå†æ“ä½œ**: O(n) - é¡ºåºéå†

### LRUç¼“å­˜æ€§èƒ½

- **Getæ“ä½œ**: O(1) - å“ˆå¸Œè¡¨æŸ¥æ‰¾
- **Putæ“ä½œ**: O(1) - æ’å…¥å’Œæ›´æ–°
- **Deleteæ“ä½œ**: O(1) - åˆ é™¤æŒ‡å®šé”®
- **ç©ºé—´å¤æ‚åº¦**: O(n) - nä¸ºå®¹é‡å¤§å°

## ğŸ§ª æµ‹è¯•è¦†ç›–

### æµ‹è¯•ç­–ç•¥

- **å•å…ƒæµ‹è¯•**: è¦†ç›–æ‰€æœ‰å…¬å¼€æ–¹æ³•
- **è¾¹ç•Œæµ‹è¯•**: ç©ºé›†åˆã€æ»¡å®¹é‡ç­‰è¾¹ç•Œæƒ…å†µ
- **é”™è¯¯æµ‹è¯•**: æ— æ•ˆç´¢å¼•ã€ç©ºæ ˆç­‰é”™è¯¯æƒ…å†µ
- **æ€§èƒ½æµ‹è¯•**: åŸºå‡†æµ‹è¯•éªŒè¯æ—¶é—´å¤æ‚åº¦

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./internal/domain/tools/

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=. ./internal/domain/tools/

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
go test -cover ./internal/domain/tools/
```
