# 系统架构

## 核心组件
1. 内存存储引擎
   - 使用map实现快速查找
   - 基于时间过期的缓存机制
   - 支持内存限制，使用LRU策略淘汰数据
2. 并发控制
   - 读写锁实现线程安全
   - 细粒度锁控制
   - 批量写入优化
3. 垃圾回收
   - 基于定时器的自动清理
   - 支持自定义过期回调处理
   - 限制单次清理数量
4. 双向循环链表
   - 实现高效的数据插入和删除
   - 支持泛型类型
   - 提供范围遍历功能
   - 用于实现LRU淘汰策略
5. 缓存淘汰策略
   - FIFO（先进先出）策略
   - LRU（最近最少使用）策略
   - 可扩展的策略接口

## 数据流向
1. 数据写入 -> 内存map
2. 数据读取 -> 内存map -> 返回结果
3. 过期清理 -> 定时器扫描 -> 调用回调函数
4. 链表操作 -> 双向循环链表 -> 支持增删改查
5. 内存限制 -> LRU淘汰 -> 删除最久未使用数据

## 性能优化
- 内存预分配
- 批量写入
- 读写分离
- 限制单次清理数量
- 链表操作优化：根据索引位置选择遍历方向
- 细粒度锁控制，减少锁竞争